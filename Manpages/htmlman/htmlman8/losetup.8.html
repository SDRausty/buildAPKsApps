<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>losetup(8) — Linux manual pages</title>
  <link rel="stylesheet" href="../stylesheet/manpages.css" type="text/css" />
  
  <link rel="home" href="../index.html" title="losetup(8) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  

  <div class="refentry" title="losetup(8) — Linux manual pages">
    <a id="losetup.8" name="losetup.8" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>losetup — set up and control loop devices</p>
    </div>

    <div class="refsynopsisdiv" title="Synopsis">
      <h2>Synopsis</h2>

      <div class="variablelist">
        <dl>
          <dt><span class="term">Get info:</span></dt>

          <dd>
            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> loopdev</p>
            </div>

            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> <code class="option">−a</code></p>
            </div>

            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> <code class="option">−j</code> file [ <code class="option">−o</code> offset ]</p>
            </div>
          </dd>

          <dt><span class="term">Delete loop:</span></dt>

          <dd>
            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> <code class="option">−d</code> loopdev...</p>
            </div>
          </dd>

          <dt><span class="term">Print name of first unused loop
          device:</span></dt>

          <dd>
            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> <code class="option">−f</code></p>
            </div>
          </dd>

          <dt><span class="term">Setup loop device:</span></dt>

          <dd>
            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> [
              <code class="option">−e</code> | <code class="option">−E</code> encryption ] [ <code class="option">−o</code> offset ] [ <code class="option">−−sizelimit</code> size ] [
              <code class="option">−p</code> pfd ]
              [<code class="option">−r</code>] <code class="option">−f</code> [<code class="option">−−show</code>] | loopdev
              file</p>
            </div>
          </dd>

          <dt><span class="term">Resize loop device:</span></dt>

          <dd>
            <div class="cmdsynopsis">
              <p><code class="command">losetup</code> <code class="option">−c</code> loopdev</p>
            </div>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1" title="DESCRIPTION">
      <a id="losetup-8_sect1" name="losetup-8_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p><span class="command"><strong>losetup</strong></span> is
      used to associate loop devices with regular files or block
      devices, to detach loop devices and to query the status of a
      loop device. If only the <em class="parameter"><code>loopdev</code></em> argument is given, the
      status of the corresponding loop device is shown.</p>

      <div class="refsect2" title="Encryption">
        <a id="losetup-8_sect2" name="losetup-8_sect2" shape="rect"> </a>

        <h3>Encryption</h3>

        <p>It is possible to specify transfer functions (for
        encryption/decryption or other purposes) using one of the
        <code class="option">−E</code> and <code class="option">−e</code> options. There are two mechanisms
        to specify the desired encryption: by number and by name.
        If an encryption is specified by number then one has to
        make sure that the Linux kernel knows about the encryption
        with that number, probably by patching the kernel. Standard
        numbers that are always present are 0 (no encryption) and 1
        (XOR encryption). When the cryptoloop module is loaded (or
        compiled in), it uses number 18. This cryptoloop module
        will take the name of an arbitrary encryption type and find
        the module that knows how to perform that encryption.</p>
      </div>
    </div>

    <div class="refsect1" title="OPTIONS">
      <a id="losetup-8_sect3" name="losetup-8_sect3" shape="rect"> </a>

      <h2>OPTIONS</h2>

      <p>The <em class="parameter"><code>size</code></em> and
      <em class="parameter"><code>offset</code></em> arguments may
      be followed by binary (2^N) suffixes KiB, MiB, GiB, TiB, PiB
      and EiB (the "iB" is optional, e.g. "K" has the same meaning
      as "KiB") or decimal (10^N) suffixes KB, MB, GB, PB and
      EB.</p>

      <div class="variablelist">
        <dl>
          <dt><span class="term"><code class="option">−a,
          −−all</code></span></dt>

          <dd>
            <p>show status of all loop devices</p>
          </dd>

          <dt><span class="term"><code class="option">−c,
          −−set−capacity
          loopdev</code></span></dt>

          <dd>
            <p>force loop driver to reread size of the file
            associated with the specified loop device</p>
          </dd>

          <dt><span class="term"><code class="option">−d,
          −−detach loopdev...</code></span></dt>

          <dd>
            <p>detach the file or device associated with the
            specified loop device(s)</p>
          </dd>

          <dt><span class="term"><code class="option">−e,
          −E, −−encryption
          encryption_type</code></span></dt>

          <dd>
            <p>enable data encryption with specified name or
            number</p>
          </dd>

          <dt><span class="term"><code class="option">−f,
          −−find</code></span></dt>

          <dd>
            <p>find the first unused loop device. If a <em class="parameter"><code>file</code></em> argument is present,
            use this device. Otherwise, print its name</p>
          </dd>

          <dt><span class="term"><code class="option">−h,
          −−help</code></span></dt>

          <dd>
            <p>print help</p>
          </dd>

          <dt><span class="term"><code class="option">−j,
          −−associated file</code></span></dt>

          <dd>
            <p>show status of all loop devices associated with
            given <em class="parameter"><code>file</code></em></p>
          </dd>

          <dt><span class="term"><code class="option">−o,
          −−offset offset</code></span></dt>

          <dd>
            <p>the data start is moved <em class="parameter"><code>offset</code></em> bytes into the
            specified file or device</p>
          </dd>

          <dt><span class="term"><code class="option">−−sizelimit size</code></span></dt>

          <dd>
            <p>the data end is set to no more than <em class="parameter"><code>size</code></em> bytes after the data
            start</p>
          </dd>

          <dt><span class="term"><code class="option">−p,
          −−pass−fd num</code></span></dt>

          <dd>
            <p>read the passphrase from file descriptor with number
            <em class="replaceable"><code>num</code></em> instead
            of from the terminal</p>
          </dd>

          <dt><span class="term"><code class="option">−r,
          −−read−only</code></span></dt>

          <dd>
            <p>setup read-only loop device</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>−−show</code></em></span></dt>

          <dd>
            <p>print device name if the <em class="parameter"><code>−f</code></em> option and a
            <em class="parameter"><code>file</code></em> argument
            are present.</p>

            <p>The short form of this option (<code class="option">−s</code>) is deprecated. This short
            form could be in collision with Loop-AES implementation
            where the same option is used for <code class="option">−−sizelimit</code>.</p>
          </dd>

          <dt><span class="term"><code class="option">−v,
          −−verbose</code></span></dt>

          <dd>
            <p>verbose mode</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1" title="RETURN VALUE">
      <a id="losetup-8_sect4" name="losetup-8_sect4" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p><span class="command"><strong>losetup</strong></span>
      returns 0 on success, nonzero on failure. When <span class="command"><strong>losetup</strong></span> displays the status
      of a loop device, it returns 1 if the device is not
      configured and 2 if an error occurred which prevented
      <span class="command"><strong>losetup</strong></span> from
      determining the status of the device.</p>
    </div>

    <div class="refsect1" title="FILES">
      <a id="losetup-8_sect5" name="losetup-8_sect5" shape="rect"> </a>

      <h2>FILES</h2>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
/dev/loop0, /dev/loop1, ...   loop devices (major=7)
</pre>
      </div>
    </div>

    <div class="refsect1" title="EXAMPLE">
      <a id="losetup-8_sect6" name="losetup-8_sect6" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>If you are using the loadable module you must have the
      module loaded first with the command</p>

      <div class="itemizedlist">
        <ul class="itemizedlist" type="disc">
          <li class="listitem">
            <p># modprobe loop</p>
          </li>
        </ul>
      </div>

      <p>Maybe also encryption modules are needed.</p>

      <div class="itemizedlist">
        <ul class="itemizedlist" type="disc">
          <li class="listitem">
            <p># modprobe des # modprobe cryptoloop</p>
          </li>
        </ul>
      </div>

      <p>The following commands can be used as an example of using
      the loop device.</p>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
# dd if=/dev/zero of=/file bs=1k count=100
# losetup -e des /dev/loop0 /file
Password:
Init (up to 16 hex digits):
# mkfs -t ext2 /dev/loop0 100
# mount -t ext2 /dev/loop0 /mnt
 ...
# umount /dev/loop0
# losetup -d /dev/loop0
</pre>
      </div>

      <p>If you are using the loadable module you may remove the
      module with the command</p>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
# rmmod loop
</pre>
      </div>
    </div>

    <div class="refsect1" title="RESTRICTION">
      <a id="losetup-8_sect7" name="losetup-8_sect7" shape="rect"> </a>

      <h2>RESTRICTION</h2>

      <p>DES encryption is painfully slow. On the other hand, XOR
      is terribly weak.</p>

      <p>Cryptoloop is deprecated in favor of dm-crypt. For more
      details see <span class="citerefentry"><span class="refentrytitle">cryptsetup</span>(8)</span>.</p>
    </div>

    <div class="refsect1" title="AVAILABILITY">
      <a id="losetup-8_sect8" name="losetup-8_sect8" shape="rect"> </a>

      <h2>AVAILABILITY</h2>

      <p>The losetup command is part of the util-linux package and
      is available from
      ftp://ftp.kernel.org/pub/linux/utils/util-linux/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
